<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>page5</title>
    <link rel="stylesheet" href="css/page5.css">
    <link rel="stylesheet" href="css/page6.css">
    <link rel="stylesheet" href="css/new.css">
   
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://assets.adobedtm.com/4ef014d90ea4/f17881fecebf/launch-300ebbf87cf6-development.min.js" async></script>
</head>

<body>
    <div class="main">

  
        <div class="sidebar sidebar2" id="mySidebar" >
         
          <pre id="api_output"></pre>
          
        </div>
        <div class="second second2" id="second">
            <div class="nav-bar" id="nav-bar">
                <div  onclick="sideBar()">

                    <i class="fa fa-bars" aria-hidden="true" style="font-size:35px;padding: 5px; color:white;" ></i>
              
                    
                  </div>

            </div>
    <div class="banner">
      <div  id="banner" class="banner-show">
       <img src="assets/banner-4.jpg">
       <h1 class="banner-hdr" id="banner-hdr">Personal Loan</h1>
       <p class="banner-txt" id="banner-txt">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
       <button class="banner-btn" id="apply-now">Apply Now</button>
    </div>
      <img class ="banner-sh" id="banner-sh" src="assets/show-green-24.png" onClick="banner()">
      </div>

      <div style="padding:10px 25px;"><h1 >We.Finance - Credit Card Application Form</h1></div>

    <div class="wrapper">
        <section class="step-wizard">
            <ul class="step-wizard-list">
                <li class="step-wizard-item">
                    <span class="progress-label">Step 01</span>
                    <span class="progress-count">1</span>
                </li>
                <li class="step-wizard-item ">
                    <span class="progress-label">Step 02</span>
                    <span class="progress-count">2</span>
                <li class="step-wizard-item">
                    <span class="progress-label">Step 03</span>
                    <span class="progress-count">3</span>
                    <span class="progress-label word-break">Auto filled</span>
                </li>
                <li class="step-wizard-item">
                    <span class="progress-label">Step 04</span>
                    <span class="progress-count">4</span>
                    <span class="progress-label word-break">Auto filled</span>
                </li>
                </li>
                <li class="step-wizard-item ">
                    <span class="progress-label">Step 05</span>
                    <span class="progress-count">5</span>
                    <span class="progress-label word-break">Auto filled</span>
                </li>
                </li>
                <li class="step-wizard-item current-item">
                    <span class="progress-label">Step 06</span>
                    <span class="progress-count"></span>
                </li>
            </ul>
        </section>
        <div class="sub-wrapper">
        <ul class="wrapper-accordion">
            <li>
                <input type="checkbox" checked>
                <i></i>
                <span>Personal Details</span>
                <p>This page was written in HTML and CSS. The CSS was compiled from SASS. I used Normalize as my CSS
                    reset and -prefix-free to save myself some headaches. I haven't quite gotten the hang of Slim
                    for compiling into HTML, but someday I'll use it since its syntax compliments that of SASS.
                    Regardless, this could all be done in plain HTML and CSS.</p>
            </li>
            <li>
                <input type="checkbox" checked>
                <i></i>
                <span>Employment Details</span>
                <p>Using the sibling and checked selectors, we can determine the styling of sibling elements based
                    on the checked state of the checkbox input element. One use, as demonstrated here, is an
                    entirely CSS and HTML accordion element. Media queries are used to make the element responsive
                    to different screen sizes.</p>
            </li>
            <li>
                <input type="checkbox" checked>
                <i></i>
                <span>Financial Obligation</span>
                <p>By making the open state default for when :checked isn't detected, we can make this system
                    accessable for browsers that don't recognize :checked. The fallback is simply an open accordion.
                    The accordion can be manipulated with Javascript (if needed) by changing the "checked" property
                    of the input element.</p>
            </li>
            <li>
                <input type="checkbox" checked>
                <i></i>
                <span>Choose a Card</span>
                <p>By making the open state default for when :checked isn't detected, we can make this system
                    accessable for browsers that don't recognize :checked. The fallback is simply an open accordion.
                    The accordion can be manipulated with Javascript (if needed) by changing the "checked" property
                    of the input element.</p>
            </li>
            <li>
                <input type="checkbox" checked>
                <i></i>
                <span>Document Upload</span>
                <p>By making the open state default for when :checked isn't detected, we can make this system
                    accessable for browsers that don't recognize :checked. The fallback is simply an open accordion.
                    The accordion can be manipulated with Javascript (if needed) by changing the "checked" property
                    of the input element.</p>
            </li>
            <li>
                <input type="checkbox" unchecked onclick="formNow()" >
                <i></i>
                <span>Review Details</span>
                
            </li>
        </ul>
        <div id="form-now" class="show">
        <div class="split-wrapper">
            
            <p class="sub-heading">Please review your details(Review)</p>
            <form class="form" id="finalform">
                <div class="split left">
                    <div class='form-control'>
                    <input type="text" class="form-control" id="first_name" name="first_name" placeholder="First Name">
                </div>

                <div class='form-control'>

                    <input type="text" class="form-control" id="last_name" name="last_name" placeholder="Last Name">
                </div>

                <div class='form-control'>
                    <input type="text" class="form-control" id="date_of_birth" name="date_of_birth" placeholder="Date of birth">
                </div>

                <div class='form-control'>
                    <input type="text" class="form-control" id="email_id" name="email_id" placeholder="Email ID">

                </div>
                
                <div class='form-control'>
                    <input type="text" class="form-control" id="mobile_number" name="mobile_number" placeholder="Mobile Number">
                </div>

                <div class="form-control">
                    <input placeholder="What’s your total monthly instalment?" id="mty-ins" name="mty-ins" type="text">
                </div>


              

                   
                </div>
                <div class="split right">
                    <div class='form-control'>
                        <select class="" placeholder="Occupation" name="occupation" id="occupation">
                            <option value="" disabled selected>Occupation</option>
                            <option value="Account Clerk">Accounts Clerk</option>
                            <option value="Accountant">Accountant</option>
                            <option value="Action Director">Action Director</option>
                            <option value="Actor">Actor</option>
                            <option value="Actress">Actress</option>
                            <option value="Actuarial Analyst">Actuarial Analyst</option>
                            <option value="Actuarist">Actuarist</option>
                            <option value="Actuary">Actuary</option>
                            <option value="Acupuncturist">Acupuncturist</option>
                            <option value="Admin">Admin</option>
                        </select>
                       
                    </div>
                   
                  
                        <div class="form-control">
                            <input name="an-inc" id="an-inc"
                               placeholder= "Select Annual Income" type="number">
                          
                         
                    </div>
                   
                    <div class='form-control'>
                        <select name="employment" id="employment">
                            <option value="" disabled selected>Employment Type</option>
                            <option value="Government Employee/ Civil Servant">Government Employee/ Civil Servant</option>
                            <option value="Private Sector Employee">Private Sector Employee</option>
                            <option value="Self-Employed With workers" > Self-Employed with Workers</option>
                            <option value="Self-Employed Without workers" >Self-Employed Without workers</option>

                        </select>
                    </div>
                    <div class='form-control'>
                        <select name="sector" id="sector">
                            <option value="" diabled selected>Employment Sector</option>
                            <option value="Accommodation and Food Service Activities">Accommodation and Food Service Activities</option>
                            <option value="Activities of Extraterritorial Organizations and Bodies">Activities of Extraterritorial Organizations and Bodies</option>
                            <option value="Activities of Households as Employers">Activities of Households as Employers</option>
                            <option value="Undifferentiated Goods and Services Producing Activities of Households for Own Use">Undifferentiated Goods and Services Producing Activities of Households for Own Use</option>
                            <option value="Administrative and Support Service Activities">Administrative and Support Service Activities</option>
                            <option value="Agriculture, Forestry and Fishing">Agriculture, Forestry and Fishing</option>
                            <option value="Arts">Arts</option>
                            <option value="Entertainment and Recreation">Entertainment and Recreation</option>
                            <option value="Construction">Construction</option>
                            <option value="Education">Education</option>

                        </select>
                    </div>
                   

                    <div class="form-control">
                        <label>Do you have any financial obligations with non-banks? </label>
                        <label class="switch">
                            <input type="checkbox" value="checked" name="obligation" id="obligation">
                            <span class="slider round"></span>
                          </label>
                        </div>
                        
                        
                       
                      
                        <div class='form-control' style="padding-top:5px ;">
                            <select name="obligationtype" id="obligationtype">
                                <option value="" diabled selected>Obligation Type</option>
                                <option value="House Loan">House Loan</option>
                                <option value="Personal Loan">Personal Loan</option>
                                <option value="Car Loan">Car Loan</option>
                                </select>
                                </div>

                                <div class="form-control">
                                    <input placeholder="Amount in USD" name="amt" id="amt" type="text">
                                </div>


                               
                               







                </div>
                <!-- <button type="button">EDIT ➔</button>
                <button type="button" id="complete"><a href="sixthpage.html">COMPLETE ➔</a></button> -->

     
            <section>
               
            </section>
        </div>


        <div class="split-wrapper">
            <p class="sub-heading">Credit Card Summary</p>
           
             
            <div class="container2">
        
                <div class="box1">
                     <img src="assets/card.png" id="card-image" alt="card-image" >
                     <p>Card Name<br>
                       Visa international card<br>Qty 1     </p><br>
                       <button class="btn">REMOVE</button><button class="btn">EDIT</button>
                    </div>
                    
                
                <div class="box2">
                   
                        <div class="div1">
                            <div>
                                <p class="p1">Credit Check</p>
                                <p class="p1" >Bill Date</p>
                                <p class="p1">Credit Limit</p>
                            </div>
                            <div>

                                <p class="p2"><span id="check">&#10003;</span></p>
                            
                            <p class="p2" >20/05/2022</p>
                            
                            <p class="p2" >$50000</p>
                            </div>
                           
                            
                            

                        </div> 
                        
                        
                    
                    
                </div>
                
                    

            </div>
           
        </div>
        <div>
            <p class="sub-heading">Confirm Shipping Address:</p>
        </div>
        <div class="form-control" style="display:flex;width:94%;">
            <div style="flex:1"><input placeholder="Street Address" name="streetAddress"></div>
            <div style="flex:1"><input placeholder="City" name="city"> </div>
            <div style="flex:1"> <select name="state" id="state" >

                <option value="" selected disabled>State</option>
                <option value="AL">Alabama</option>
                <option value="AK">Alaska</option>
                <option value="AZ">Arizona</option>
                <option value="AR">Arkansas</option>
                <option value="CA">California</option>
                <option value="CO">Colorado</option>
                <option value="CT">Connecticut</option>
                <option value="DE">Delaware</option>
                <option value="DC">District Of Columbia</option>
                <option value="FL">Florida</option>
                <option value="GA">Georgia</option>
                <option value="HI">Hawaii</option>
                <option value="ID">Idaho</option>
                <option value="IL">Illinois</option>
                <option value="IN">Indiana</option>
                <option value="IA">Iowa</option>
                <option value="KS">Kansas</option>
                <option value="KY">Kentucky</option>
                <option value="LA">Louisiana</option>
                <option value="ME">Maine</option>
                <option value="MD">Maryland</option>
                <option value="MA">Massachusetts</option>
                <option value="MI">Michigan</option>
                <option value="MN">Minnesota</option>
                <option value="MS">Mississippi</option>
                <option value="MO">Missouri</option>
                <option value="MT">Montana</option>
                <option value="NE">Nebraska</option>
                <option value="NV">Nevada</option>
                <option value="NH">New Hampshire</option>
                <option value="NJ">New Jersey</option>
                <option value="NM">New Mexico</option>
                <option value="NY">New York</option>
                <option value="NC">North Carolina</option>
                <option value="ND">North Dakota</option>
                <option value="OH">Ohio</option>
                <option value="OK">Oklahoma</option>
                <option value="OR">Oregon</option>
                <option value="PA">Pennsylvania</option>
                <option value="RI">Rhode Island</option>
                <option value="SC">South Carolina</option>
                <option value="SD">South Dakota</option>
                <option value="TN">Tennessee</option>
                <option value="TX">Texas</option>
                <option value="UT">Utah</option>
                <option value="VT">Vermont</option>
                <option value="VA">Virginia</option>
                <option value="WA">Washington</option>
                <option value="WV">West Virginia</option>
                <option value="WI">Wisconsin</option>
                <option value="WY">Wyoming</option>
        </select></div>
           
        </div>
        <div>
            <p ><input type="checkbox" name="terms" id="terms"> <strong>Submitting this form your agree to our Privacy policy and <a href="#">Terms & Conditions</a></strong></p>
        </form> 
           <button onClick="collectData()">SUBMIT➔</button>

           <div class="alert" id="alert_box" style="display:none;margin:5px;">
            <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span> 
            <strong>Alert!</strong> Please fill out all the fields.
          </div>
         </div>
        </div>
        </div>

        
    </div>
    <div class="footer">
        
    </div>
    </div>
    </div>
</body>
<script type="text/javascript" src="js/main.js"></script>
<script type="text/javascript" >

var cookies=document.cookie;
// console.log(cookies);
var cookies_arr=cookies.split(";")
var cookies_form={};
for(var items of cookies_arr){
    var item=items.split("=");
        if(item[0]!=null)
            cookies_form[item[0].trim()] = item[1];
}
window.onload=function(){
    window.adobeDataLayer.push({
"event":"pageLoaded",
"web": {
"webPageDetails": {
    "name":"us:en:personal:credit-cards:creditcard-application-form-review-details",
    "server":"nextrow-publish.adobesandbox.com",
    "siteSection":"personal",
    "isErrorPage":false,
    "pageViews": {
                        "value":1
                     }
              }
},
"_spnam": {
"pageInfo": {
    "type": "form",
    "siteSubSection":"credit-cards",
    "previousPage":"us:en:personal:credit-cards",
    "previousURL":"https://nextrow-publish.adobesandbox.com/content/nr_finance/us/en/personal/credit-cards.html",
    "language":"English"
    },
"formDetails": {
    "form": {
            "type":"application-form",
            "name":"creditcard-application-form"
                     },
"formStep": {
            "name":"review-details",                
            "number":"6",                        
            "step5": {
                    "value":1
                        }
                     },
    "product": [ {
            "category":"creditcard"
                     } ]
              }
}
});

//cookies spliting


//mx integration here

if(window.XMLHttpRequest)
				{
					obj=new XMLHttpRequest();
				}
				else
				{
					obj=new ActiveXObject('Microsoft.XMLHTTP');
				}
				obj.open("GET","https://pea-green-mountain.000webhostapp.com/apicall.php",true);
				obj.send();
				obj.onreadystatechange=function()
				{
				if(obj.readyState==4 && obj.status==200)
				{
					value=obj.responseText;
                    op=JSON.stringify(JSON.parse(value),null,2)
                    // console.log(op);
                    
                    var account_data=JSON.parse(value);
                    process_response(account_data);
                        // console.log(account_data["account"]["available_credit"]);
                }
                }

};




var nickname=cookies_form["first_name"];
var fullname=cookies_form["first_name"]+" "+cookies_form["last_name"];
var email=cookies_form["email_id"];
function process_response(account_data){
    account_data["account"]["available_credit"]=20000.0;
    account_data["account"]["cash_balance"] = 2000.0;
    account_data["account"]["credit_limit"] = 60000.0;
    account_data["account"]["credit_score"] = 724;
    account_data["account"]["currency_code"] = "USD"
    account_data["account"]["holdings_value"] = 8000.0;
    account_data["account"]["interest_rate"] = 11.4;
    account_data["account"]["last_payment"] = 4800.0;
    account_data["account"]["loan_amount"] = 6400.0;
    account_data["account"]["name"] = fullname;
    account_data["account"]["nickname"] =nickname;

    op=JSON.stringify(account_data,null,2);
    document.getElementById("api_output").innerHTML=op;


    // console.log(email);
    //pushing data here
 
    window.adobeDataLayer.push({
"event":"mxIntegrationComplete",
"person": {
"name": {
"fullName": `${account_data["account"]["name"]}`, //string
}
},
"_spnam": {
"mxProfile": {
"accountdetails": {
"account_number": parseInt(account_data["account"]["account_number"]), //long
"created_at": `${account_data["account"]["created_at"]}`, //dateTime
"imported_at": `${account_data["account"]["imported_at"]}`, //dateTime
"institution_code": `${account_data["account"]["institution_code"]}`, //string
"is_closed": account_data["account"]["is_closed"], //boolean
"is_hidden": account_data["account"]["is_hidden"], //boolean
"type": `${account_data["account"]["type"]}`, //string
"updated_at": `${account_data["account"]["updated_at"]}` //dataTime
},
"bankingdetails": {
"available_balance":parseInt(account_data["account"]["available_balance"]), //integer
"balance":parseInt(account_data["account"]["balance"]), //integer
"cash_balance":parseInt(account_data["account"]["cash_balance"])
},
"creditDetails": {
"available_credit":parseInt(account_data["account"]["available_credit"]), //integer
"credit_limit":parseInt(account_data["account"]["credit_limit" ])//integer
},
"integrationIds": {
"guid": `${account_data["account"]["guid"]}`, //string
"id": `${account_data["account"]["id"]}`, //string
"member_guid": `${account_data["account"]["member_guid"]}`, //string
"user_guid": `${account_data["account"]["user_guid"]}`, //string
"user_id": `${account_data["account"]["user_id"]}` //string
},
"loanDetails": {
"day_payment_is_due":parseInt(account_data["account"]["day_payment_is_due"]), //integer
"interest_rate":parseInt(account_data["account"]["interest_rate"]), //integer
"last_payment":parseInt(account_data["account"]["last_payment"]), //integer
"last_payment_at": `${account_data["account"]["payment_due_at"]}`, //dateTime
"loan_amount":parseInt(account_data["account"]["loan_amount"]), //integer"minimum_payment":"minimum_payment", //integer
"payment_due_at": `${account_data["account"]["payment_due_at"]}` //dateTime
}
}
},
"identityMap": {
"email": [ {
"id": `${email}`, //Dynamic mail ID from the Application
"authenticatedState": "ambiguous",
"primary": true
} ]
}
});



//filling up the form from cookies






 var formUpdate=document.getElementById("finalform");
                        var formlen =formUpdate.elements.length;
                        
                        for(i=0;i<formlen;i++){
                            if(formUpdate.elements[i].id in cookies_form){

                                if(formUpdate.elements[i].id == "obligation")
                                    document.getElementById(formUpdate.elements[i].id).checked=true;
                                else if(formUpdate.elements[i].id == "mty-ins")
                                    document.getElementById(formUpdate.elements[i].id).value=6400.0;
                                else if(formUpdate.elements[i].id == "amt")
                                    document.getElementById(formUpdate.elements[i].id).value=4800.0;
                                else if(formUpdate.elements[i].id == "obligationtype")
                                    document.getElementById(formUpdate.elements[i].id).value="House Loan"
                                else
                                    document.getElementById(formUpdate.elements[i].id).value=cookies_form[formUpdate.elements[i].id];
                            }
                            else{
                                if(formUpdate.elements[i].id == "obligation")
                                    document.getElementById(formUpdate.elements[i].id).checked=true;
                                else if(formUpdate.elements[i].id == "mty-ins")
                                    document.getElementById(formUpdate.elements[i].id).value=6400.0;
                                else if(formUpdate.elements[i].id == "amt")
                                    document.getElementById(formUpdate.elements[i].id).value=4800.0;
                                else if(formUpdate.elements[i].id == "obligationtype")
                                    document.getElementById(formUpdate.elements[i].id).value="House Loan"
                            }
                        //   document.cookie=formUpdate.elements[i].name+"="+formUpdate.elements[i].value+";";
                         
                        }
                       



}




</script>
<style>
    .switch {
position: relative;
display: inline-block;
width: 46px;
height: 25px;

}

.switch input { 
opacity: 0;
width: 0;
height: 0;
}

.slider {
position: absolute;
cursor: pointer;
top: 0;
left: 0;
right: 1px;
bottom: 0;
background-color: #ccc;
-webkit-transition: .4s;
transition: .4s;
}

.slider:before {
position: absolute;
content: "";
height: 20px;
width: 20px;
left: 3px;
bottom: 3px;
background-color: white;
-webkit-transition: .4s;
transition: .4s;
}

input:checked + .slider {
background-color:red;
}

input:focus + .slider {
box-shadow: 0 0 1px;
}

input:checked + .slider:before {
-webkit-transform: translateX(20px);
-ms-transform: translateX(20px);
transform: translateX(20px);
}

/* Rounded sliders */
.slider.round {
border-radius: 34px;
}

.slider.round:before {
border-radius: 50%;
}
  </style>

</html>